---
title: Weekly update (November 05 ~ November 11, 2018)
date: 2018-11-12
summary: Last week, we landed 54 PRs in the TiDB repository, 3 PRs in the TiSpark repository, and 28 PRs in the TiKV and PD repositories.
tags: ['TiDB', 'TiSpark', 'TiKV', 'PD']
---

# Weekly update in TiDB

Last week, we landed [54 PRs](https://github.com/pingcap/tidb/pulls?page=1&q=is%3Apr+is%3Amerged+merged%3A2018-11-05..2018-11-11&utf8=%E2%9C%93) in the TiDB repository.

## Added

- [Provide the `ADMIN SHOW NEXT_ROW_ID` SQL interface](https://github.com/pingcap/tidb/pull/8242)
- [Propose the `VIEW` design](https://github.com/pingcap/tidb/pull/8061)
- [Implement outer join elimination in the logical optimization](https://github.com/pingcap/tidb/pull/8021)

## Improved

- [Distinguish internal/general SQL statements for transaction related metrics](https://github.com/pingcap/tidb/pull/8255)
- [Recover the panic in parallel aggregation and projection](https://github.com/pingcap/tidb/pull/8185)
- [Add a variable to control the maximum length of the logged query string](https://github.com/pingcap/tidb/pull/8183)
- [Add a variable to control whether writing `_tidb_rowid` is allowed](https://github.com/pingcap/tidb/pull/8126)
- [Return an error on check for the missing user](https://github.com/pingcap/tidb/pull/8112)
- [Support the plan cache for prepared `INSERT`/`DELETE`/`UPDATE` statements](https://github.com/pingcap/tidb/pull/8107)
- [Add a variable to control the slow log threshold](https://github.com/pingcap/tidb/pull/8094)
- [Ensure scan of tikv-client is not out of range](https://github.com/pingcap/tidb/pull/8081)

## Fixed

- [Fix the bug of comparison when a row contains `NULL`](https://github.com/pingcap/tidb/pull/8241)
- [Make `affected rows` of `INSERT` consistent with MySQL](https://github.com/pingcap/tidb/pull/8233)
- [Correct the field name when `IfNull` is eliminated](https://github.com/pingcap/tidb/pull/8225)
- [Fix the unexpected error for `ORDER BY` in `UNION` statements](https://github.com/pingcap/tidb/pull/8214)
- [Fix a deadlock in the latch scheduler](https://github.com/pingcap/tidb/pull/8186)
- [Fix a bug of converting duration to timestamp in the statistics component](https://github.com/pingcap/tidb/pull/8174)
- [Return `NULL` for the `values` function in the non-`INSERT` statement](https://github.com/pingcap/tidb/pull/8019)
- [Change the default charset and collation from `utf8 utf8_bin` to `utf8mb4 utf8mb4_bin`](https://github.com/pingcap/tidb/pull/7965)

# Weekly update in TiSpark

Last week, we landed [3 PRs](https://github.com/pingcap/tispark/pulls?page=1&q=is%3Apr+is%3Amerged+merged%3A2018-11-05..2018-11-11&utf8=%E2%9C%93) in the TiSpark repository.

## Added

- [Add `resolveLock` implementation](https://github.com/pingcap/tispark/pull/475)

## Fixed

- [Fix the incorrect `tso` request generated by `PDClient`](https://github.com/pingcap/tispark/pull/480)

# Weekly update in TiKV and PD

Last week, we landed [28 PRs](https://github.com/search?utf8=%E2%9C%93&q=repo%3Atikv%2Ftikv+repo%3Apingcap%2Fpd+is%3Apr+is%3Amerged+merged%3A2018-11-05..2018-11-11&type=Issues) in the TiKV and PD repositories.

## Added

- [Support the `Time` function in Coprocessor](https://github.com/tikv/tikv/pull/3753)

## Improved

- [Add sanity check for the count field of a request](https://github.com/pingcap/pd/pull/1312)
- [Record `start_ts` in the write conflict error](https://github.com/tikv/tikv/pull/3750)
- [Add the `end_key` limit to the `kv_scan` interface](https://github.com/tikv/tikv/pull/3720)

## Fixed

- [Fix the issue about the `regions/check` API](https://github.com/pingcap/pd/pull/1315)
- [Fix `ScheduleConfig` data race](https://github.com/pingcap/pd/pull/1307/files)

# New contributors (Thanks!)

tidb: [lindali0331](https://github.com/lindali0331)

tidb-operator: [kirinse](https://github.com/kirinse)

docs-cn: 

- bianxindong
- [ppiao](https://github.com/ppiao)
 